(function($){$.fn.jqueryBanner=function(duracao){var duracao=duracao?duracao:4000;var totalItens=$(this).find('ul li').length;var objeto=$(this);var fade_IN=700;var fade_OUT=1500;var tempoCorrido=0;var acao={init:function(){acao.paginacao();acao.insereFundo();acao.troca();$(objeto).find('span').bind('click',function(){acao.clique($(this));})},barra:function(){if(!$(objeto).find('.barra').length){$('<div class="barra"></div>').prependTo(objeto);}$(objeto).find('.barra').stop();$(objeto).find(".barra").css('width','0%');$(objeto).find(".barra").animate({width:"100%"},duracao,"linear");},troca:function(){acao.barra();acao.slide();},trocaFundo:function(selecionado){$(objeto).find('div.fundo').fadeOut(fade_OUT);$(objeto).find('div.fundo').eq(selecionado).fadeIn(fade_IN);if($.browser.msie&&$.browser.version<8){$(objeto).find('div.fundo').css('z-index','-1');}},insereFundo:function(){var pos=0;var sPaginacao="";$(objeto).find('li').each(function(){sPaginacao+='<div class="fundo" style="background: url('+$(this).attr('fundo')+') center repeat" pos="'+pos+'"></div>';pos++;});$(objeto).append(sPaginacao);},slide:function(){var posicao=0;var proximo=0;$(objeto).find('li').each(function(){if($(this).attr('class')=='ativo'){proximo=posicao+1;$(this).fadeOut(fade_OUT);$(this).css('z-index','50');$(objeto).find('li').removeClass('ativo');$(objeto).find('.nav span').removeClass('ativo');}posicao+=1;})
if(proximo>=totalItens){proximo=0;}acao.trocaFundo(proximo);$(objeto).find('li').eq(proximo).fadeIn(fade_IN);$(objeto).find('li').eq(proximo).addClass('ativo');$(objeto).find('.nav span').eq(proximo).addClass('ativo');$(objeto).find('li').eq(proximo).css('z-index','53');tempoCorrido=setTimeout(acao.troca,duracao);},clique:function(campo){clearTimeout(tempoCorrido);var posicaoClique=$(campo).attr('pos');acao.barra();$(objeto).find('li').fadeOut(fade_OUT);$(objeto).find('li').removeClass('ativo');$(objeto).find('.nav span').removeClass('ativo');$(objeto).find('li').eq(posicaoClique).fadeIn(fade_IN);$(objeto).find('li').eq(posicaoClique).addClass('ativo')
$(objeto).find('.nav span').eq(posicaoClique).addClass('ativo')
if($(objeto).find('li').eq(posicaoClique).attr('fundo')){acao.trocaFundo(posicaoClique);}tempoCorrido=setTimeout(acao.troca,duracao);},paginacao:function(){sPaginacao='<div class="nav"><div class="wrapper">';for(i=1;i<=totalItens;i++){sPaginacao+='<span pos="'+(i-1)+'"></span>';}sPaginacao+='</div></div>';$(objeto).append(sPaginacao);}}
acao.init();}})(jQuery);